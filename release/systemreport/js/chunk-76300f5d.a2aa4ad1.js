(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76300f5d"],{2579:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row align-items-center"},[i("div",{staticClass:"col-sm-12"},[i("div",{staticClass:"page-title-box",staticStyle:{display:"flex","justify-content":"space-between","padding-top":"10px","padding-bottom":"10px"}},[i("h4",{staticClass:"font-size-18"},[e._v(e._s(e.title))]),i("div",{staticClass:"page-title-right"},[i("b-breadcrumb",{staticClass:"m-0",attrs:{items:e.items}})],1)])])])},s=[],r={components:{},props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}}},o=r,a=i("0c7c"),l=Object(a["a"])(o,n,s,!1,null,null,null);t["a"]=l.exports},3893:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("b0c0"),i("4e82"),i("d81d");var n=function(e){return{id:e.id,name:e.name,sort:e.sort,permissions:e.permissions}},s=function(e){return{id:e.id,name:e.name,sort:e.sort,permissions:e.permissions,createdAt:e.createdAt,modifiedAt:e.modifiedAt,isDeleted:e.isDeleted}},r=function(){return{id:null,name:null,sort:0,permissions:null,isDeleted:!1}},o=function(e){if(e.length>0){var t=[];return e.map((function(e,i){t.push(s(e))})),null!==t&&void 0!==t?t:[]}return[]},a={toJson:n,fromJson:s,baseJson:r,toListModel:o}},"47c6":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("d81d");var n=function(e){return{resultString:e.resultString,resultCode:e.resultCode}},s=function(e){return{id:e.id,title:e.title,content:e.content,read:e.read,recipientId:e.recipientId,recipient:e.recipient,senderId:e.senderId,url:e.url}},r=function(){return{id:null,title:null,content:null,read:null,recipientId:null,recipient:null,senderId:null,url:null}},o=function(e){if(e.lenght>0){var t=[];return e.map((function(e,i){t.push(s(e))})),null!==t&&void 0!==t?t:[]}return[]},a={addMessage:n,fromJson:s,toListModel:o,baseJson:r}},a13e:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",[i("PageHeader",{attrs:{title:e.title,items:e.items}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-body"},[i("div",{staticClass:"mb-3"},[i("label",{staticClass:"col-md-2 col-form-label"},[e._v("Vai trò")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-10"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],staticClass:"form-control",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.role=t.target.multiple?i:i[0]},e.handleRoleChange]}},[e.listVaiTro&&e.listVaiTro.length>0?e._l(e.listVaiTro,(function(t,n){return i("option",{key:n,domProps:{value:t,selected:t.id===e.role.id}},[e._v(e._s(t.code+" - "+t.ten)+" ")])})):[i("option",[e._v("Không có dữ liệu")])]],2)]),i("div",{staticClass:"col-md-2"},[i("button",{staticClass:"btn btn-success",staticStyle:{width:"100%"},on:{click:e.handleSubmitRole}},[e._v("Lưu")])])])]),e._l(e.listModule,(function(t,n){return i("div",{key:t.id},[i("div",{staticStyle:{"font-size":"14px","margin-bottom":"8px","font-weight":"bold"}},[e._v(" "+e._s(++n)+". "+e._s(t.name))]),i("div",{staticStyle:{display:"flex","column-gap":"15px","justify-content":"space-around"}},[t.permissions&&t.permissions.length>0?e._l(t.permissions,(function(t,s){return i("div",{key:t.id+"abc",staticClass:"form-check form-check-success mb-3"},[i("b-form-checkbox",{attrs:{switch:"",size:"sm"},on:{change:function(i){return e.handleAddPermissionsToRole(t)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"subItem.checked"}},[i("div",{staticStyle:{display:"flex","flex-direction":"column"}},[i("label",{staticClass:"form-check-label"},[e._v(" "+e._s(n)+"."+e._s(++s)+" "+e._s(t.name)+" ")]),i("span",{staticClass:"form-check-label",staticStyle:{"font-size":"10px"}},[e._v(" "+e._s(t.action))])])])],1)})):e._e()],2)])}))],2)])])])],1)},s=[],r=i("1da1"),o=(i("96cf"),i("a4d3"),i("e01a"),i("d3b7"),i("159b"),i("c740"),i("b0c0"),i("4de4"),i("6a34")),a=i("2579"),l=i("c2a4"),c=i("47c6"),u=i("3893"),d={page:{title:"Thêm quyền vào vai trò",meta:[{name:"description",content:l.description}]},components:{Layout:o["a"],PageHeader:a["a"]},data:function(){return{title:"Thiết lập quyền 1",items:[{text:"Vai trò",active:!0},{text:"Thêm quyền",active:!0}],submitted:!1,data:[],model:{},listModule:[],listVaiTro:[],listPermission:[],role:{id:null,permissions:[]}}},validations:{},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GetListModule();case 2:return t.next=4,e.GetListVaiTro();case 4:e.role=Object.assign({},e.listVaiTro[0]),e.InitPermission();case 6:case"end":return t.stop()}}),t)})))()},methods:{GetListModule:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("moduleStore/getAll").then((function(t){"SUCCESS"===t.resultCode&&(e.listModule=u["a"].toListModel(t.data))}));case 2:case"end":return t.stop()}}),t)})))()},GetListVaiTro:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("roleStore/getAll").then((function(t){"SUCCESS"===t.resultCode&&(e.listVaiTro=t.data)}));case 2:case"end":return t.stop()}}),t)})))()},InitPermission:function(){var e=this;this.listModule.forEach((function(t){return t.permissions&&t.permissions.length>0&&t.permissions.forEach((function(t){var i,n,s=null===(i=e.role)||void 0===i||null===(n=i.permissions)||void 0===n?void 0:n.findIndex((function(e){return e.id==t.id}));t.checked=void 0!=s&&-1!=s})),t}))},handleAddPermissionsToRole:function(e){var t,i,n=null===(t=this.role.permissions)||void 0===t?void 0:t.findIndex((function(t){return t.id==e.id}));void 0==n||-1==n?(this.role.permissions||(this.role.permissions=[]),this.role.permissions.push({id:e.id,name:e.name,action:e.action})):this.role.permissions=null===(i=this.role.permissions)||void 0===i?void 0:i.filter((function(t){if(t.id!=e.id)return t}))},handleRoleChange:function(){this.InitPermission()},handleSubmitRole:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("roleStore/update",e.role).then((function(t){"SUCCESS"===t.resultCode&&e.$store.dispatch("snackBarStore/addNotify",c["a"].addMessage(t))}));case 2:case"end":return t.stop()}}),t)})))()}},computed:{},watch:{}},m=d,p=i("0c7c"),f=Object(p["a"])(m,n,s,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-76300f5d.a2aa4ad1.js.map